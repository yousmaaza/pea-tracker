# PEA Tracker - Suivi Intelligent de Portefeuille

## Vue d'ensemble du projet

PEA Tracker est une plateforme intelligente de gestion de portefeuille PEA (Plan d'Ã‰pargne en Actions) utilisant des agents IA autonomes Claude pour optimiser les dÃ©cisions d'investissement. Le systÃ¨me automatise la surveillance des marchÃ©s et l'analyse de portefeuille pour aider les investisseurs particuliers Ã  prendre des dÃ©cisions Ã©clairÃ©es sur les titres Ã©ligibles PEA.

## Vision

CrÃ©er une solution lÃ©gÃ¨re et intelligente basÃ©e sur le **Model Context Protocol (MCP)** et **Claude Code**, minimisant la complexitÃ© technique tout en offrant des analyses financiÃ¨res avancÃ©es grÃ¢ce Ã  l'IA.

## Objectifs principaux

- **Automatiser** la surveillance des marchÃ©s financiers europÃ©ens
- **Analyser** automatiquement les positions du portefeuille
- **Alerter** sur les opportunitÃ©s d'achat/vente avec scoring de fiabilitÃ©
- **Recommander** des ajustements stratÃ©giques basÃ©s sur l'historique
- **Rapporter** mensuellement sur la performance et l'allocation

## Utilisateur cible

Investisseur particulier dÃ©tenteur d'un PEA souhaitant optimiser sa gestion de portefeuille grÃ¢ce Ã  l'intelligence artificielle, sans avoir besoin de surveiller constamment les marchÃ©s.

## PÃ©rimÃ¨tre gÃ©ographique

Le systÃ¨me couvre les marchÃ©s europÃ©ens Ã©ligibles au PEA :
- France (Euronext Paris)
- Allemagne (Xetra)
- Italie (Borsa Italiana)
- Espagne (BME)
- Pays-Bas (Euronext Amsterdam)
- Belgique (Euronext Brussels)
- Portugal (Euronext Lisbon)
- ETF Ã©ligibles PEA (structure europÃ©enne)

## Architecture technique

### Philosophie

Architecture **MCP-native** utilisant Claude Code comme environnement d'exÃ©cution. Les agents Claude accÃ¨dent directement aux sources de donnÃ©es via des serveurs MCP standardisÃ©s, Ã©liminant complÃ¨tement le besoin d'infrastructure intermÃ©diaire (n8n, serveurs, etc.).

### Flux de donnÃ©es simplifiÃ©

```
Boursorama â†’ Export Excel â†’ Google Drive â†â†’ Claude Agent (MCP) â†’ Gmail
```

### Stack technique actuelle

**Environnement d'exÃ©cution**
- **Claude Code** : CLI tool pour exÃ©cuter les agents IA
- **Agents personnalisÃ©s** : DÃ©finis dans `.claude/agents/`
- **ExÃ©cution** : Manuelle via CLI ou automatisÃ©e via cron/scheduler systÃ¨me

**Serveurs MCP configurÃ©s**
- `@modelcontextprotocol/server-google-drive` : AccÃ¨s Google Drive/Sheets
- `@modelcontextprotocol/server-gmail` : Envoi d'emails
- `mcp-server-yfinance` : DonnÃ©es boursiÃ¨res Yahoo Finance (temps rÃ©el)
- `@modelcontextprotocol/server-github` : Gestion du code source
- `@modelcontextprotocol/server-filesystem` : AccÃ¨s au systÃ¨me de fichiers local

**Stockage et donnÃ©es**
- Google Drive : Stockage des exports Boursorama, historiques et rapports
- Structure de dossiers Google Drive :
    ```
    PEA-Tracker/
    â”œâ”€â”€ Imports/                           # Boursorama exports (transaction history)
    â”‚   â””â”€â”€ export-positions-comptables-DD-MM-YYYY_HH-MM-SS.csv
    â”œâ”€â”€ Reports/                           # Reports generated by agents
    â”‚   â”œâ”€â”€ monthly/                      # Monthly Portfolio Advisor reports
    â”‚   â””â”€â”€ signals/                      # Market Watcher alerts
    â”‚       â””â”€â”€ signal_TICKER_YYYYMMDD_HHMM.md
    â””â”€â”€ PEA_Watchlist_Indicateurs.xlsx    # Main watchlist with technical indicators
    ```

**DonnÃ©es financiÃ¨res**
- Yahoo Finance via MCP : DonnÃ©es boursiÃ¨res en temps rÃ©el (gratuit)
- Indicateurs techniques calculÃ©s par l'agent (RSI, MACD, MA)

**Notifications**
- Gmail via MCP : Envoi automatique des alertes et rapports

### Documentation technique

- Architecture MCP : [docs/architecture/mcp-integration.md](docs/architecture/mcp-integration.md)
- Yahoo Finance MCP : [docs/mcp/yahoo-finance-integration.md](docs/mcp/yahoo-finance-integration.md)

## Les agents IA

### Agent 1 : Market Watcher PEA âœ… IMPLÃ‰MENTÃ‰

**Fichier** : `.claude/agents/market-watcher-pea.md`

**Mission** : Surveillance quotidienne des marchÃ©s et gÃ©nÃ©ration d'alertes d'opportunitÃ©s (achat/vente) sur les titres Ã©ligibles PEA.

**ResponsabilitÃ©s** :
- RÃ©cupÃ©rer la watchlist depuis Google Drive (`PEA_Watchlist_Indicateurs.xlsx`)
- Collecter les donnÃ©es de marchÃ© via Yahoo Finance MCP
- Calculer les indicateurs techniques (RSI, MACD, MA20/50/200)
- DÃ©tecter les signaux d'achat/vente/surveillance
- Scorer la fiabilitÃ© de chaque signal (0-100)
- GÃ©nÃ©rer des rapports Markdown dÃ©taillÃ©s
- Sauvegarder les rapports dans Google Drive
- Envoyer des alertes par email (score â‰¥ 60)

**Workflow complet** :
1. RÃ©cupÃ©ration du fichier Excel depuis Google Drive
2. Parsing des feuilles "Watchlist", "Indicateurs", "Positions"
3. Collecte des donnÃ©es de marchÃ© (prix, volume, historique)
4. Calcul des indicateurs techniques pour chaque ticker actif
5. GÃ©nÃ©ration des signaux avec scoring de confiance
6. Mise Ã  jour du fichier Excel avec nouveaux indicateurs
7. CrÃ©ation de rapports Markdown pour signaux â‰¥ 60
8. Upload des rapports dans Google Drive
9. Envoi d'emails d'alerte via Gmail

**Indicateurs techniques** :
- RSI (14 pÃ©riodes) : DÃ©tection de surachat/survente
- MACD (12, 26, 9) : Identification des tendances
- Moyennes mobiles (MA20, MA50, MA200) : Support/rÃ©sistance
- Volume ratio : Confirmation des mouvements

**Signaux gÃ©nÃ©rÃ©s** :
- ğŸŸ¢ **BUY** : RSI < 30, volume Ã©levÃ©, MACD haussier, prix > MA200
- ğŸ”´ **SELL** : RSI > 70, divergence RSI, MACD baissier, cassure MA200
- ğŸŸ¡ **WATCH** : RSI 30-40 ou 60-70, consolidation, signaux mixtes

**FrÃ©quence recommandÃ©e** : Quotidienne Ã  8h (avant ouverture des marchÃ©s)

**Invocation** :
```bash
# Via Claude Code
claude-code agent run market-watcher-pea

# Ou en mode interactif
claude-code
> invoke @market-watcher-pea
```

**SpÃ©cifications complÃ¨tes** : [docs/agents/market-watcher-spec.md](docs/agents/market-watcher-spec.md)

### Agent 2 : Portfolio Advisor ğŸ”œ Ã€ DÃ‰VELOPPER

**Mission** : Analyse mensuelle du portefeuille, suivi de la performance et recommandations stratÃ©giques.

**ResponsabilitÃ©s prÃ©vues** :
- Calculer la performance globale et par ligne
- Analyser l'allocation sectorielle et gÃ©ographique
- Ã‰valuer le niveau de diversification
- GÃ©nÃ©rer des rapports mensuels dÃ©taillÃ©s
- Proposer des recommandations de rÃ©Ã©quilibrage
- Suivre les objectifs d'investissement

**FrÃ©quence recommandÃ©e** : Mensuelle (1er du mois) + Ã  la demande

**Statut** : SpÃ©cifications dÃ©finies, implÃ©mentation Ã  venir

**SpÃ©cifications complÃ¨tes** : [docs/agents/portfolio-advisor-spec.md](docs/agents/portfolio-advisor-spec.md)

## Automatisation via launchd

### Architecture d'automatisation

Le systÃ¨me utilise **launchd** (scheduler natif macOS) pour exÃ©cuter l'agent Market Watcher automatiquement 4 fois par jour pendant les jours de bourse :

- **07h00** : Avant ouverture des marchÃ©s europÃ©ens
- **12h00** : Mi-journÃ©e (suivi intraday)
- **18h00** : AprÃ¨s clÃ´ture (analyse journaliÃ¨re)
- **21h00** : Analyse fin de journÃ©e

**Jours d'exÃ©cution** : Lundi Ã  Vendredi uniquement (pas de weekends)

### Flux d'automatisation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  launchd (macOS)                                             â”‚
â”‚  4 plists pour Market Watcher (7h, 12h, 18h, 21h)          â”‚
â”‚  Jours: Lundi-Vendredi uniquement                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Wrapper Script: scripts/run-market-watcher.sh              â”‚
â”‚                                                              â”‚
â”‚  1. VÃ©rifier prÃ©requis (Docker, API keys)                  â”‚
â”‚  2. DÃ©marrer MCP Yahoo Finance (Docker)                     â”‚
â”‚  3. Activer venv Python                                     â”‚
â”‚  4. ExÃ©cuter: claude-code agent run market-watcher-pea     â”‚
â”‚  5. Logger rÃ©sultats                                        â”‚
â”‚  6. Envoyer email d'erreur si Ã©chec (Gmail MCP)            â”‚
â”‚  7. ArrÃªter MCP Yahoo Finance (si dÃ©marrÃ© par le script)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Market Watcher (Claude)                              â”‚
â”‚  - Analyse via MCP yfinance, googledrive, gmail            â”‚
â”‚  - GÃ©nÃ¨re signaux et alertes                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composants

**Scripts crÃ©Ã©s** :
- `scripts/run-market-watcher.sh` : Wrapper principal orchestrant l'exÃ©cution
- `scripts/utils/check-prerequisites.sh` : VÃ©rifie Docker, API keys, MCP servers
- `scripts/utils/start-yfinance-mcp.sh` : DÃ©marre le conteneur Docker MCP Yahoo Finance
- `scripts/utils/stop-yfinance-mcp.sh` : ArrÃªte proprement le conteneur Docker
- `scripts/utils/send-error-notification.sh` : Envoie des alertes par email en cas d'erreur

**Fichiers launchd** :
- `launchd/com.pea-tracker.market-watcher-07h.plist`
- `launchd/com.pea-tracker.market-watcher-12h.plist`
- `launchd/com.pea-tracker.market-watcher-18h.plist`
- `launchd/com.pea-tracker.market-watcher-21h.plist`

**Configuration** :
- `config/.env.template` : Template de configuration (copier vers `config/.env`)
- `logs/` : RÃ©pertoire des logs d'exÃ©cution

### PrÃ©requis techniques

| Ã‰lÃ©ment | Description | Requis |
|---------|-------------|--------|
| Docker | Pour exÃ©cuter le serveur MCP Yahoo Finance | âœ… Oui |
| Image Docker | `yahoo-finance-mcp` (construite depuis le repo) | âœ… Oui |
| Python 3.11+ | Pour l'environnement virtuel | âœ… Oui |
| claude-code | CLI Anthropic | âœ… Oui |
| ANTHROPIC_API_KEY | ClÃ© API Claude | âœ… Oui |
| Google Drive MCP | AccÃ¨s aux fichiers Excel | âœ… Oui |
| Gmail MCP | Envoi d'alertes | âœ… Oui |

### Installation

#### 1. Construire l'image Docker MCP Yahoo Finance

```bash
cd /path/to/yahoo-finance-mcp
docker build -t yahoo-finance-mcp .
```

#### 2. CrÃ©er le fichier de configuration

```bash
cd /path/to/pea-tracker
cp config/.env.template config/.env
```

Ã‰diter `config/.env` avec vos vraies valeurs :

```bash
# Claude API (REQUIS)
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxx

# MCP Yahoo Finance (chemin serveur local)
YAHOO_FINANCE_MCP_PATH=/Users/yousrids/Documents/yahoo-finance-mcp

# Email pour alertes d'erreur
EMAIL_RECIPIENT=votre@email.com

# Niveau de log (debug, info, error)
LOG_LEVEL=info
```

#### 3. CrÃ©er l'environnement Python (si nÃ©cessaire)

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

#### 4. Tester manuellement

```bash
# Tester les prÃ©requis
./scripts/utils/check-prerequisites.sh

# Tester le dÃ©marrage MCP
./scripts/utils/start-yfinance-mcp.sh

# Tester le wrapper complet
./scripts/run-market-watcher.sh

# Tester l'arrÃªt MCP
./scripts/utils/stop-yfinance-mcp.sh
```

#### 5. Installer les jobs launchd

```bash
# Copier les plists vers ~/Library/LaunchAgents
cp launchd/*.plist ~/Library/LaunchAgents/

# Charger tous les jobs
launchctl load ~/Library/LaunchAgents/com.pea-tracker.market-watcher-07h.plist
launchctl load ~/Library/LaunchAgents/com.pea-tracker.market-watcher-12h.plist
launchctl load ~/Library/LaunchAgents/com.pea-tracker.market-watcher-18h.plist
launchctl load ~/Library/LaunchAgents/com.pea-tracker.market-watcher-21h.plist
```

### VÃ©rification et monitoring

**Lister les jobs actifs** :
```bash
launchctl list | grep pea-tracker
```

**Tester manuellement un job** :
```bash
launchctl start com.pea-tracker.market-watcher-07h
```

**Consulter les logs** :
```bash
# Logs launchd
tail -f logs/launchd-07h.log
tail -f logs/launchd-07h.err

# Logs Market Watcher
tail -f logs/market-watcher/market-watcher-*.log

# Logs Docker MCP
docker logs yfinance-mcp --tail 50
```

**VÃ©rifier l'Ã©tat du conteneur Docker** :
```bash
docker ps | grep yfinance-mcp
docker logs yfinance-mcp
```

### DÃ©sinstallation

```bash
# DÃ©charger tous les jobs
launchctl unload ~/Library/LaunchAgents/com.pea-tracker.market-watcher-*.plist

# Supprimer les plists
rm ~/Library/LaunchAgents/com.pea-tracker.market-watcher-*.plist

# Optionnel : ArrÃªter et supprimer le conteneur Docker
docker stop yfinance-mcp
docker rm yfinance-mcp
```

### Gestion des erreurs

Le systÃ¨me inclut une gestion robuste des erreurs :

1. **VÃ©rification des prÃ©requis** : VÃ©rifie Docker, API keys, serveurs MCP avant chaque exÃ©cution
2. **Health checks** : Attend que le serveur MCP soit prÃªt (timeout 30s)
3. **Retry logic** : RedÃ©marre le conteneur Docker s'il est arrÃªtÃ©
4. **Notifications email** : Envoie un email via Gmail MCP en cas d'erreur
5. **Logs dÃ©taillÃ©s** : Tous les logs sont sauvegardÃ©s avec timestamps

**Exemple de notification d'erreur** :
```
Subject: [PEA Tracker] âŒ Erreur exÃ©cution Market Watcher

Message: Le serveur MCP Yahoo Finance n'a pas rÃ©pondu aprÃ¨s 30s

Log excerpt:
[2026-01-24 08:00:15] [ERROR] Timeout: Le serveur n'a pas rÃ©pondu
[2026-01-24 08:00:15] [ERROR] Logs du conteneur: ...
```

### Notes importantes

- âš ï¸ **Docker doit Ãªtre actif** : Le daemon Docker doit tourner pour que le serveur MCP fonctionne
- âš ï¸ **Pas d'exÃ©cution le weekend** : Les jobs launchd sont configurÃ©s pour Lundi-Vendredi uniquement
- âš ï¸ **Secrets dans .env** : Ne jamais commiter le fichier `config/.env` (dÃ©jÃ  dans `.gitignore`)
- âš ï¸ **Logs rotatifs** : Pensez Ã  nettoyer les logs anciens pÃ©riodiquement
- âœ… **Idempotence** : Les scripts peuvent Ãªtre relancÃ©s plusieurs fois sans problÃ¨me

## Structure du projet

```
claude-project/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ market-watcher-pea.md         # âœ… Agent Market Watcher implÃ©mentÃ©
â”‚   â””â”€â”€ settings.local.json                # Configuration MCP locale
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ market-watcher-spec.md         # SpÃ©cifications Market Watcher
â”‚   â”‚   â””â”€â”€ portfolio-advisor-spec.md      # SpÃ©cifications Portfolio Advisor
â”‚   â”œâ”€â”€ architecture/
â”‚   â”‚   â””â”€â”€ mcp-integration.md             # Documentation architecture MCP
â”‚   â”œâ”€â”€ mcp/
â”‚   â”‚   â””â”€â”€ yahoo-finance-integration.md   # Guide Yahoo Finance MCP
â”‚   â”œâ”€â”€ ARCHITECTURE_DECISION.md           # DÃ©cisions architecture (n8n â†’ MCP)
â”‚   â””â”€â”€ SETUP_GUIDE.md                     # Guide d'installation
â”‚
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ market-analysis.md                 # Prompt template Market Watcher
â”‚   â”œâ”€â”€ portfolio-review.md                # Prompt template Portfolio Advisor
â”‚   â””â”€â”€ prompt/                            # Anciens prompts de test
â”‚
â”œâ”€â”€ scripts/                               # (Vide - plus nÃ©cessaire avec MCP)
â”‚
â”œâ”€â”€ CLAUDE.md                              # ğŸ“„ Ce fichier
â”œâ”€â”€ README.md                              # Documentation utilisateur
â””â”€â”€ TODO.md                                # Liste des tÃ¢ches Ã  venir
```

## PrÃ©requis et configuration

### PrÃ©requis

| Ã‰lÃ©ment | Description | CoÃ»t |
|---------|-------------|------|
| Claude Code | CLI tool Anthropic | Gratuit |
| ClÃ© API Claude | API Anthropic | 5-20â‚¬/mois |
| Google Workspace | Drive + Gmail | Gratuit |
| MCP Servers | Serveurs MCP standards | Gratuit |
| Yahoo Finance | Via MCP | Gratuit |

**Total estimÃ©** : **5-20â‚¬/mois** (uniquement l'API Claude)

### Installation

1. **Installer Claude Code** :
```bash
npm install -g @anthropic-ai/claude-code
```

2. **Configurer l'API Claude** :
```bash
export ANTHROPIC_API_KEY="your-api-key"
```

3. **Configurer les serveurs MCP** :
   - Ã‰diter `.claude/settings.local.json`
   - Ajouter les serveurs nÃ©cessaires (Google Drive, Gmail, Yahoo Finance)

4. **Configurer Google Drive** :
   - CrÃ©er la structure de dossiers `PEA-Tracker/`
   - CrÃ©er le fichier `PEA_Watchlist_Indicateurs.xlsx`
   - Configurer les authentifications OAuth

5. **Configuration Gmail** :
   - GÃ©nÃ©rer un mot de passe d'application
   - Configurer le serveur MCP Gmail

### Documentation d'installation complÃ¨te

Voir [docs/SETUP_GUIDE.md](docs/SETUP_GUIDE.md)

## Utilisation

### 1. Market Watcher - Surveillance quotidienne

**Lancement manuel** :
```bash
claude-code agent run market-watcher-pea
```

**Automatisation via cron** (recommandÃ©) :
```bash
# Ã‰diter crontab
crontab -e

# Ajouter cette ligne pour exÃ©cution quotidienne Ã  8h
0 8 * * 1-5 cd /path/to/claude-project && claude-code agent run market-watcher-pea
```

**Ce que fait l'agent** :
1. âœ… RÃ©cupÃ¨re la watchlist depuis Google Drive
2. âœ… Analyse les titres actifs
3. âœ… Calcule les indicateurs techniques
4. âœ… GÃ©nÃ¨re les signaux d'achat/vente
5. âœ… Sauvegarde les rapports dans Google Drive
6. âœ… Envoie les alertes par email (score â‰¥ 60)

### 2. Portfolio Advisor - Analyse mensuelle (Ã  venir)

**PrÃ©vu** : Analyse automatique le 1er de chaque mois

### 3. Export Boursorama

**ProcÃ©dure** :
1. Se connecter Ã  Boursorama
2. PEA â†’ TÃ©lÃ©charger les positions comptables (format CSV)
3. Uploader le fichier dans Google Drive/PEA-Tracker/Imports/
4. L'agent Portfolio Advisor utilisera ces donnÃ©es pour l'analyse

## Avantages de l'architecture MCP

### âœ… SimplicitÃ©
- Pas de serveur Ã  maintenir
- Pas de base de donnÃ©es Ã  gÃ©rer
- Pas d'orchestrateur complexe (n8n)
- Configuration minimale

### âœ… CoÃ»ts rÃ©duits
- Infrastructure : 0â‚¬ (pas de serveur)
- API Claude : 5-20â‚¬/mois uniquement
- Total : **5-20â‚¬/mois** (vs 25-60â‚¬/mois avec n8n)

### âœ… FiabilitÃ©
- Moins de points de dÃ©faillance
- Agents autonomes et rÃ©silients
- Gestion d'erreurs intÃ©grÃ©e

### âœ… Ã‰volutivitÃ©
- Ajout facile de nouveaux serveurs MCP
- CrÃ©ation simple de nouveaux agents
- RÃ©utilisation de serveurs MCP standards

## SÃ©curitÃ©

- âœ… ClÃ©s API stockÃ©es dans variables d'environnement
- âœ… Authentification OAuth pour Google services
- âœ… Pas de stockage d'identifiants broker
- âœ… AccÃ¨s restreint aux dossiers Google Drive
- âœ… Communications chiffrÃ©es (HTTPS)
- âš ï¸ Ne jamais commiter les fichiers de configuration avec secrets

## Roadmap

### Phase 1 : Infrastructure MCP âœ… TERMINÃ‰E
- [x] Configuration Claude Code
- [x] Installation serveurs MCP
- [x] Authentification Google Drive/Gmail
- [x] Structure Google Drive crÃ©Ã©e
- [x] Agent Market Watcher implÃ©mentÃ©

### Phase 2 : Portfolio Advisor ğŸ”„ EN COURS
- [ ] ImplÃ©menter l'agent Portfolio Advisor
- [ ] Parser les exports Boursorama (CSV)
- [ ] Calculer les mÃ©triques de performance
- [ ] GÃ©nÃ©rer les rapports mensuels
- [ ] Automatiser l'envoi des rapports

### Phase 3 : Optimisations ğŸ“‹ PLANIFIÃ‰E
- [ ] Backtesting des signaux Market Watcher
- [ ] Profil de risque personnalisÃ©
- [ ] IntÃ©gration actualitÃ©s financiÃ¨res (RSS/API)
- [ ] Dashboard web simple (optionnel)
- [ ] Alertes Telegram/SMS (optionnel)

### Phase 4 : AmÃ©liorations avancÃ©es ğŸ”® FUTUR
- [ ] Machine Learning pour scoring amÃ©liorÃ©
- [ ] Analyse sentiment market (NLP)
- [ ] IntÃ©gration donnÃ©es fondamentales
- [ ] Support multi-portefeuilles

## Points d'attention
- Si besoin d'utiliser du python il faudra s'assurer que le profile d'environnement

## Workflow de dÃ©veloppement et gestion Git

### Commits et push rÃ©guliers

**âš ï¸ RÃˆGLE IMPORTANTE** : Toute modification significative du code ou de la documentation doit Ãªtre commitÃ©e et pushÃ©e immÃ©diatement.

**Quand commiter et pusher** :
- âœ… **AprÃ¨s chaque modification fonctionnelle** (ajout de feature, correction de bug, refactoring)
- âœ… **AprÃ¨s mise Ã  jour de documentation** (README, CLAUDE.md, fichiers docs/)
- âœ… **AprÃ¨s modification de configuration** (MCP, agents, settings)
- âœ… **AprÃ¨s crÃ©ation/modification de fichiers** importants
- âœ… **Ã€ la fin de chaque tÃ¢che complÃ©tÃ©e** dans la todo list
- âŒ **Pas de commit** pour les fichiers temporaires ou tests locaux

**Bonnes pratiques de commit** :
1. **Messages clairs et descriptifs** en franÃ§ais :
   ```bash
   # Format recommandÃ©
   git commit -m "feat: ajout calcul RSI dans Market Watcher"
   git commit -m "fix: correction parsing Excel watchlist"
   git commit -m "docs: mise Ã  jour CLAUDE.md avec workflow Git"
   git commit -m "refactor: simplification logique scoring signaux"
   ```

2. **PrÃ©fixes de commit** (convention) :
   - `feat:` - Nouvelle fonctionnalitÃ©
   - `fix:` - Correction de bug
   - `docs:` - Documentation uniquement
   - `refactor:` - Refactoring sans changement de fonctionnalitÃ©
   - `test:` - Ajout ou modification de tests
   - `chore:` - Maintenance (dÃ©pendances, config, etc.)
   - `perf:` - AmÃ©lioration de performance

3. **Commits atomiques** :
   - Un commit = une modification logique
   - Ne pas mÃ©langer plusieurs changements non liÃ©s
   - Facilite le review et le rollback si nÃ©cessaire

**Workflow Git standard** :
```bash
# 1. VÃ©rifier l'Ã©tat actuel
git status

# 2. Ajouter les fichiers modifiÃ©s
git add <fichiers>
# ou pour tout ajouter
git add .

# 3. Commiter avec message descriptif
git commit -m "feat: description claire de la modification"

# 4. Pusher vers la branche de dÃ©veloppement
git push -u origin claude/update-claude-workflow-9kjVv

# 5. En cas d'erreur rÃ©seau, retry avec backoff
# (automatique via les instructions Git Operations)
```

**Branche de dÃ©veloppement** :
- ğŸ”¹ Branche actuelle : `claude/update-claude-workflow-9kjVv`
- ğŸ”¹ Toujours dÃ©velopper sur cette branche
- ğŸ”¹ JAMAIS pusher sur main/master sans permission explicite
- ğŸ”¹ CrÃ©er une PR pour merger vers main

**Gestion des erreurs Git** :
- Si `git push` Ã©choue avec erreur rÃ©seau â†’ retry jusqu'Ã  4 fois (2s, 4s, 8s, 16s)
- Si erreur 403 â†’ vÃ©rifier que la branche commence par `claude/` et se termine par session ID
- Si conflit â†’ `git pull --rebase origin <branch>` puis rÃ©soudre et pusher

**Synchronisation** :
```bash
# RÃ©cupÃ©rer les derniÃ¨res modifications
git fetch origin claude/update-claude-workflow-9kjVv
git pull origin claude/update-claude-workflow-9kjVv

# Ou en une commande
git pull --rebase origin claude/update-claude-workflow-9kjVv
```

**Ã€ Ã‰VITER** :
- âŒ Commiter des secrets ou clÃ©s API (.env, credentials.json)
- âŒ Commiter des fichiers de config locaux (.claude/settings.local.json)
- âŒ Force push sur des branches partagÃ©es
- âŒ Amender des commits dÃ©jÃ  pushÃ©s (sauf autorisation)
- âŒ Commits vagues type "mise Ã  jour" ou "fix"

**Utilisation du .gitignore** :
Le projet doit inclure un `.gitignore` avec :
```
.claude/settings.local.json
.env
*.pyc
__pycache__/
node_modules/
.DS_Store
credentials.json
token.json
```

### RÃ©glementaire
âš ï¸ **Important** : Ce systÃ¨me ne constitue pas du conseil en investissement au sens AMF. Tous les rapports et alertes incluent un disclaimer appropriÃ©. Les dÃ©cisions d'investissement restent sous la responsabilitÃ© de l'utilisateur.

### Limitations techniques
- DÃ©pendance aux APIs externes (Yahoo Finance, Google)
- Rate limiting possible sur les APIs gratuites
- DonnÃ©es de marchÃ© avec lÃ©ger dÃ©lai (non temps rÃ©el strict)
- NÃ©cessite une connexion internet stable

### Bonnes pratiques
- Avant d'utiliser les agents tu peux creer un environnement virtuel python et utiliser la commande `/pip-mode standard` pour installer les dÃ©pendances python sans conflit.
- utilise du Python 3.11 ou supÃ©rieur
- Toujours vÃ©rifier les signaux avant d'agir
- Utiliser les stop-loss recommandÃ©s
- Ne jamais investir plus que ce qu'on peut perdre
- Diversifier le portefeuille
- Suivre une stratÃ©gie d'investissement cohÃ©rente

## Support et ressources

### Documentation
- [Architecture MCP](docs/architecture/mcp-integration.md)
- [Guide d'installation](docs/SETUP_GUIDE.md)
- [SpÃ©cifications agents](docs/agents/)

### Ressources externes
- [Claude Code Documentation](https://docs.anthropic.com/claude-code)
- [Model Context Protocol](https://modelcontextprotocol.io/)
- [Yahoo Finance API](https://www.yahoofinanceapi.com/)
- [Ã‰ligibilitÃ© PEA](https://www.service-public.fr/particuliers/vosdroits/F2385)

## Glossary

- **PEA** : Plan d'Ã‰pargne en Actions - Enveloppe fiscale franÃ§aise
- **MCP** : Model Context Protocol - Standard pour connecter les LLM aux sources de donnÃ©es
- **RSI** : Relative Strength Index - Indicateur de momentum
- **MACD** : Moving Average Convergence Divergence - Indicateur de tendance
- **MA** : Moving Average - Moyenne mobile
- **Claude Code** : CLI tool pour exÃ©cuter des agents Claude
- **Boursorama** : Courtier en ligne franÃ§ais
- **ETF** : Exchange Traded Fund - Fonds nÃ©gociÃ© en bourse

## Disclaimer

âš ï¸ **AVERTISSEMENT IMPORTANT**

Ce projet est un **outil d'aide Ã  la dÃ©cision** utilisant l'analyse technique automatisÃ©e. Il **NE CONSTITUE EN AUCUN CAS UN CONSEIL EN INVESTISSEMENT** au sens de l'AMF (AutoritÃ© des MarchÃ©s Financiers).

**ResponsabilitÃ©s** :
- Toutes les dÃ©cisions d'investissement restent sous votre **entiÃ¨re responsabilitÃ©**
- Les performances passÃ©es ne prÃ©jugent **pas** des performances futures
- Les marchÃ©s financiers comportent des **risques de perte en capital**
- Vous devez toujours effectuer vos **propres recherches**
- Consultez un conseiller financier agrÃ©Ã© si nÃ©cessaire

**Limites de l'outil** :
- Les analyses sont basÃ©es uniquement sur des indicateurs techniques
- Les donnÃ©es peuvent contenir des erreurs ou retards
- L'IA peut gÃ©nÃ©rer des recommandations erronÃ©es
- Aucune garantie de rentabilitÃ© n'est fournie

**Utilisation Ã  vos risques et pÃ©rils.**

## Licence

[Ã€ dÃ©finir selon vos besoins]

---

**Version** : 2.0.0
**DerniÃ¨re mise Ã  jour** : 2026-01-07
**Statut** : Phase 1 terminÃ©e, Agent Market Watcher opÃ©rationnel
**Architecture** : MCP-native avec Claude Code

CrÃ©Ã© avec â¤ï¸ et Claude Code
